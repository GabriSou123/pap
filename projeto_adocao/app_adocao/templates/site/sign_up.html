<!DOCTYPE html>

<!-- PÁGINA REGISTAR -->
<html>
    <head>
        {% load static %}
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <title> Registar-se | Instituto Vida Animal </title>
        <link rel="icon" href="{% static 'imagens/logo.png' %}" type="image/png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

    <body>
        <header class="cabecalho">
            <div style="gap: 20px; display: flex; align-items: center;">
                <img src="{% static 'imagens/logo.png' %}" alt="Logo do Instituto Vida Animal" class="logo">
                <a class="home" style="font-size: 32px; font-family: cursive; font-weight: bolder;" href="/"> Instituto Vida Animal </a>
            </div>

            <nav>
                <a style="font-size: 23px;" href="../sobreNos">Sobre Nós</a>
                <a style="font-size: 23px;" href="../adotar">Adotar</a>
                <a style="font-size: 23px;" href="../contactos">Contactos</a>
                <a style="font-size: 23px;" href="{% url 'sign_in' %}">Entrar</a>
            </nav>
        </header>

        <br><br><br>
        <div class="signCaixa"><br>
            <form method="POST">
                {% csrf_token %}
                <h1 style="text-align: center; margin: 0px;">Registe-se</h1><br><br>

                <label style="margin-left: 30px; font-size: x-large;">Username: </label><br>
                <input style="margin-left: 30px; height: 20px; width: 400px;" type="text" name="username" required autocomplete="off"><br><br>

                <label style="margin-left: 30px; font-size: x-large;">Email: </label><br>
                <input style="margin-left: 30px; height: 20px; width: 400px;" type="text" name="email" required autocomplete="off"><br><br>

                <label style="margin-left: 30px; font-size: x-large;">Palavra passe: </label><br>
                <input style="margin-left: 30px; height: 20px; width: 400px;" type="password" name="password" required autocomplete="off"><br><br>

                <label style="margin-left: 30px; font-size: x-large;">Confirmar palavra passe: </label><br>
                <input style="margin-left: 30px; height: 20px; width: 400px;" type="password" name="confirm_password" required autocomplete="off"><br><br>
                
                <div style="text-align: center;">
                    <button style="font-size: large; background-color: darkgreen; color: white;">Registar</button>
                </div>

                <br><hr>
                <p style="margin-left: 0px; text-align: center; font-size: larger;">Já tem conta? <a class="sign_up" href="../sign_in">Entrar</a></p>
                
                {% if messages %}
                    <ul class="messages">
                    {% for message in messages %}
                        <li class="{{ message.tags }}">{{ message }}</li>
                    {% endfor %}
                    </ul>
                {% endif %}

            </form>
        
        </div>
    </body>
</html>


<!--from django.contrib.auth.models import User
from django.contrib.auth import login
from django.contrib import messages

def sign_up(request):
    if request.method == 'POST':
        username = request.POST['username']
        email = request.POST['email']
        password = request.POST['password']
        confirm_password = request.POST['confirm_password']

        if password != confirm_password:
            messages.error(request, 'As palavras passe não coincidem!')
            return redirect('sign_up')

        if User.objects.filter(username=username).exists():
            messages.error(request, 'O username já está em uso!')
            return redirect('sign_up')

        if User.objects.filter(email=email).exists():
            messages.error(request, 'O e-mail já está em uso!')
            return redirect('sign_up')

        user = User.objects.create_user(username=username, email=email, password=password)
        user.save()

        # Perfil é criado automaticamente pelo sinal, não precisa criar aqui

        login(request, user)
        messages.success(request, 'Conta criada com sucesso!')
        return redirect('index')

    return render(request, 'site/sign_up.html')
-->


<!--from django.contrib.auth import authenticate, login

def sign_in(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']

        user = authenticate(request, username=username, password=password)

        if user is not None:
            login(request, user)
            messages.success(request, 'Bem-vindo(a) de volta!')
            return redirect('index')
        else:
            messages.error(request, 'Nome de usuário ou senha inválidos!')
            return redirect('sign_in')

    return render(request, 'site/sign_in.html')
-->